<div class="br-pagetitle">
	<i class="icon ion-filing"></i>
    <div>
    	<h4>COMPTES</h4>
    	<p style="color:blue;" class="mg-b-0">----</p>
	</div>
</div>

<div class="br-section-wrapper">
	<h6 class="br-section-label">Comptes enrégistrés</h6>
	{% if "createtype" in app.session.get('userdroit') %}
	<div x-data="{ ajouter : false }" class="mg-t-2">
		<div class="d-flex justify-content-end" style="padding:10px;">
			<button onclick="showNouveau()" id="btn-nouveau" class="btn btn-primary"><i class="fa fa-plus-circle"></i>  Ajouter</button>
		</div>
		<div class="formelement" id="nouveau" x-show="ajouter" style="padding:10px; display:none;">
			<div class="row d-flex justify-content-center">
				<div class="col-lg-12 col-xlg-12 col-md-12">
					<div class="row mg-t-40">
						<div class="col">
							<form id="form-send" class="js-form-send" action="{{ path('compte-create') }}" method="POST"
							data-toggle="ajax" data-target="monContent">
							<input type="hidden" name="id" id="id">
								<div class="form-layout form-layout-4">
									<h6 class="br-section-label titre-nouveau">Ajouter un nouveau compte</h6>
									<div class="row">
										<label class="col-sm-4 form-control-label">Intitulé: <span class="tx-danger">*</span></label>
										<div class="col-sm-8 mg-t-10 mg-sm-t-0">
											<input type="text" class="form-control" id="intitule" name="intitule" placeholder="Intitulé du groupe de compte" required>
										</div>
									</div><!-- row --><br>
									<div class="row">
										<label class="col-sm-4 form-control-label">Code: <span class="tx-danger">*</span></label>
										<div class="col-sm-8 mg-t-10 mg-sm-t-0">
											<input type="text" class="form-control" id="code" name="code" placeholder="Code OHADA" required>
										</div>
									</div><!-- row --><br>
									<div class="row">
										<label class="col-sm-4 form-control-label">Type: <span class="tx-danger">*</span></label>
										<div class="col-sm-8 mg-t-10 mg-sm-t-0">
											<select class="form-control" id="type" name="type" required>
												<option disabled selected>Choisir le type de compte</option>                                                                    
												<option value="CREDIT">CREDIT</option>
												<option value="DEBIT">DEBIT</option>
											</select> 
										</div>
									</div><!-- row --><br>
									<div class="row">
										<label class="col-sm-4 form-control-label">Compte parent: </label>
										<div class="col-sm-8 mg-t-10 mg-sm-t-0">
											<select class="form-control" id="parent" name="parent">
												<option disabled selected>Choisir un compte parent</option>
												{% for compte in listes %}
													<option value="{{compte.id}}">{{compte.intitule}}</option>
												{% endfor %}
											</select> 
										</div>
									</div><!-- row --><br>
									<div class="row row-xs mg-t-30">
										<div class="col-sm-8 mg-l-auto">
											<div class="form-layout-footer">
												<button type="button" class="btn btn-default" onclick="showNouveau()">Annuler</button>
												<button type="submit" id="btn-save-nouveau" class="btn btn-primary mg-r-5">Enrégistrer</button>
											</div>
											<!-- form-layout-footer -->
										</div>
									</div>
								</div>
							<form>
						</div><!-- col-6 -->
					</div><!-- row -->
				</div>
			</div>
		</div>
	</div>
	{% endif %}	
			
	<div class="row table-wrapper mg-t-40">
		<div class="col-lg-12 col-md-12">
			<table class="datatable table display responsive">
				<thead>
					<tr>
						<th class="wd-5p">#</th>
						<th class="wd-10p">Code</th>
						<th class="wd-20p">Intitulé</th>
						<th class="wd-15p">Type</th>
						<th class="wd-15p text-center">Action</th>
					</tr>
				</thead>
				<tbody>
					{% if listes is iterable %}
						{% for liste in listes %}
							<tr>
								<td>{{loop.index}}</td>
								<td>{{ liste.code }}</td>
								<td>{{ liste.intitule }}</td>
								<td>
									{% if liste.type =="CREDIT" %}
										<span class='badge badge-success'>{{ liste.type }}</span>
									{% else %}
										<span class='badge badge-danger'>{{ liste.type }}</span>
									{% endif %}										
								</td>
								<td class="dropdown text-center">
										<a href="#" data-toggle="dropdown" class="btn pd-y-3 tx-gray-500 hover-info"><i class="icon ion-more"></i></a>
                                        <div class="dropdown-menu dropdown-menu-right pd-10">
                                            <nav class="nav nav-style-1 flex-column text-center">	
                                                {% if "updatetype" in app.session.get('userdroit') %}
													<a class="btn btn-link {{app.user.hasAccess('compte-show')}}"  data-toggle="ajax" data-target="monContent" 
															title="Afficher les détails" 
															href="{{ path('compte-show', {'id': liste.id})}}"> Editer
													</a>
												{% endif %}
												{% if app.user.isadmin %}
													<form class="confirm-waiting js-form-send confirm-delete" 
														data-message="Voulez-vous supprimer ce compte?"
														data-toggle="ajax" class="{{app.user.hasAccess('compte-delete')}}"
														data-target="monContent"
														action="{{ path('compte-delete', {'id': liste.id})}}" 
														method="DELETE">
														<button class="btn btn-link" type="submit" titile="Supprimer">Supprimer
														</button>	
													</form>
												{% endif %}
                                            </nav>
                                        </div><!-- dropdown-menu -->
								</td>
							</tr>
						{% endfor %}
					{% else %}
						<tr>
							<td> Pas de données</td>
						</tr>
					{% endif %}
				</tbody>
			</table>
		</div>
	</div><!-- table-wrapper -->
</div>

{#  #}
