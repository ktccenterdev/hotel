<div class="br-pagetitle">
	<i class="icon ionicons ion-levels"></i>
	<div>
		<h4>Type de chambre</h4>
		<p style="color:blue;" class="mg-b-0">----</p>
	</div>
</div><!-- d-flex -->

<div class="br-section-wrapper">
	<div class="container">
		<div class="row">
			<div class="col-sm"><h6 class="br-section-label">Types de chambres enrégistrés</h6>
			
				<div x-data="{ ajouter : false }">
					<div class="d-flex justify-content-end mg-b-20" style="padding:10px;">
						<button onclick="showNouveau()" id="btn-nouveau" class="btn btn-primary"><i class="icon ion-plus-circled"></i>  Ajouter</button>
						<button class="btn btn-secondary {{app.user.hasAccess('print-typechambre')}}" style="margin-left:5px;"><a style="color:white;" href="{{path('print-typechambre')}}" target="_blank"><i class="fa fa-print"></i> Imprimer</a></button>
					</div>
					<div class="formelement" id="nouveau" x-show="ajouter" style="padding:10px; display:none;">
						<div class="row d-flex justify-content-center">
							<div class="col-lg-7 col-xlg-8 col-md-12">
								<div class="row mg-t-80">
									<div class="col">
										<form class="js-form-sendavecfile sauvegardededonne {{app.user.hasAccess('createtype')}}" 
										data-toggle="ajax", data-target="monContent"
										action="{{ path('createtype') }}" method="POST" enctype = "multipart/form-data">
										<input type="hidden" name="id" id="id">
											<div class="form-layout form-layout-4">
												<h6 class="br-section-label">Ajouter un nouveau type de chambre</h6>
													
													<div class="row">
														<label class="col-sm-3 form-control-label" style="padding-right:5px;">Antenne: <span class="tx-danger">*</span></label>
														<div class="col-sm-9" style="padding-right:5px;">
														<select name="antene" class="form-control js-select2" data-placeholder="Sélectionner" style="width: 100%;">
															<option label="Sélectionner"></option>
															{% for antene in antenes %}
																<option value="{{antene.id}}">{{antene.nom}}</option>
															{% endfor %}
														</select>
														</div>
													</div><br>
													<div class="row">
														<label class="col-sm-3 form-control-label" style="padding-right:5px;">Nom: <span class="tx-danger">*</span></label>
														<div class="col-sm-9 mg-sm-t-0">
															<input type="text" class="form-control" name="name" placeholder="Nom du type" required>
														</div>
													</div>
													
												<div class="row">
													<label class="col-sm-3 form-control-label">Description: </label>
													<div class="col-sm-9 mg-sm-t-0">
														<textarea rows="3" class="form-control mg-t-20" name="description" placeholder="Description"></textarea>
													</div>
												</div><!-- row -->
												<div class="ht-250 bg-gray-200 mg-t-60 d-flex align-items-center justify-content-center">
													<input type="file" name="photo" id="file-2"
														class="inputfile" data-caption="files selected" accept=".png, .jpg,.jpeg">
													<label for="file-2" class="if-outline if-outline-info">
														<i class="icon ion-ios-upload-outline tx-24"></i>
														<span>Choisisez une photo pour ce type</span>
													</label>
												</div><!-- ht-200 -->
												<div class="row row-xs mg-t-30">
													<div class="col-sm-8 mg-l-auto">
															<div class="form-layout-footer">
																<button type="button" class="btn btn-default" onclick="showNouveau()">Annuler</button>
																<button type="submit" id="btn-save-nouveau" class="btn btn-primary mg-r-5">Enrégistrer</button>
															</div>
														</div>
													</div>
											</div><!-- form-layout -->
										<form>
									</div><!-- col-6 -->
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div id="accordion2" class="accordion accordion-head-colored accordion-primary" role="tablist" aria-multiselectable="true">
  
		{% for item in antenes %}
		<div class="card-header" role="tab" id="headingThree2{{loop.index}}">
			<h6 class="mg-b-0">
				<a class="collapsed transition" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree2{{loop.index}}" aria-expanded="false" aria-controls="collapseThree2">
					{{item.nom}}
				</a>
			</h6>
		</div>
        <div id="collapseThree2{{loop.index}}" class="collapse" role="tabpanel" aria-labelledby="headingThree2">
          	<div class="br-pagebody">
				<div class="card-block pd-20">
					<div class="table-wrapper">
						<table class="datatable table display responsive nowrap">
							<thead>
								<tr>
									<th class="wd-5p">#</th>
									<th class="wd-20p">Nom</th>
									<th class="wd-20p">Nombre</th>
									<th>Description</th>
									<th class="wd-15p text-center">Action</th>
								</tr>
							</thead>
							<tbody>
								{% for liste in item.typechambres %}
									<tr>
										<td>{{loop.index}}</td>
										<td>{{ liste.nom }}</td>
										<td>{{ liste.chambres | length }}</td>
										<td>{{ liste.description |u.truncate(40, '...', false) }}</td>
										<td class="dropdown text-center">
											<a href="#" data-toggle="dropdown" class="btn pd-y-3 tx-gray-500 hover-info"><i class="icon ion-more"></i></a>
											<div class="dropdown-menu dropdown-menu-right pd-10">
												<nav class="nav nav-style-1 flex-column text-center">	
													<a href="{{ path('type-chambre-show', {'id':liste.id}) }}" class="btn btn-link"  data-toggle="ajax" data-target="monContent" >Détails</a>							
													<form class="confirm-delete {{app.user.hasAccess('type-chambre-delete')}}" method="DELETE"
														action="{{path('type-chambre-delete')}}"  
														data-message="Voulez-vous supprimer ce type?"
														data-toggle="ajax" data-target="monContent">
														<input type="hidden" name="id" value="{{liste.id}}">												
														<button type="submit"  class=" ajax-link btn btn-link" >Supprimer</button>
													</form>		
												</nav>
											</div><!-- dropdown-menu -->
										</td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
    		</div>
    	</div><!-- collapse -->  
    	{% endfor %}
  
	</div><!-- accordion -->
</div><!-- br-section-wrapper -->
	
   

